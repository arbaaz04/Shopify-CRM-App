{"version":3,"sources":["/var/gadget/codegen/framework-1749678231038-Bm25Gl/src/AmbientContext.ts"],"sourcesContent":["\nimport { Client } from \"@gadget-client/bambe-crm-app\";\nimport { FastifyBaseLogger } from \"fastify\";\nimport { AppConfiguration } from \"./AppConfiguration.js\";\nimport { AppConnections } from \"./AppConnections.js\";\nimport { Session } from \"./Session.js\";\nimport { GadgetMailer, RequestData } from \"./types.js\";\n\n/** A high performance structured logger which writes logs to the Logs Viewer in the Gadget Editor. */\nexport type Logger = FastifyBaseLogger;\n\n/** Represents the data that's in always context */\nexport interface AmbientContext {\n  /** The current request's session, if it has one. Requests made by browsers are given sessions, but requests made using Gadget API Keys are not. */\n  session?: Session;\n  /** The current request's session ID, if it has one. Requests made by browsers are given sessions, but requests made using Gadget API Keys are not. */\n  sessionID?: string;\n  /** All bambe-crm-app configuration values */\n  config: AppConfiguration;\n  /** A map of connection name to instantiated connection objects for bambe-crm-app */\n  connections: AppConnections;\n  /** A high performance structured logger which writes logs to the Logs Viewer in the Gadget Editor. */\n  logger: Logger;\n  /**\n   * An instance of the API client for bambe-crm-app.\n   *\n   * __Note__: This client is authorized using a superuser internal api token and has permission to invoke any action in the system using normal API mutations or the Internal API.\n   **/\n  api: Client;\n  /**\n   * The details of the request that is invoking this unit of work, if it was invoked by a request.\n   *\n   * __Note__: Request details are not always present, like during a background connection sync, a background job, or an action retry.\n   **/\n  request?: RequestData;\n  /** App URL for the current environment e.g. https://example.gadget.app */\n  currentAppUrl: string;\n  /** An instance of the GadgetMailer, responsible for handling email sending */\n  emails: GadgetMailer;\n  /**\n   * A signal for if/when the request for processing this unit of work gets prematurely aborted. Useful for passing along to long running requests that should be interrupted when the client goes away.\n   */\n  signal: AbortSignal;\n}\n"],"names":[],"mappings":"AAQA,oGAAoG,GAGpG,iDAAiD,GACjD,WA+BC,CA9BC,iJAAiJ,IAEjJ,oJAAoJ,IAEpJ,2CAA2C,IAE3C,kFAAkF,IAElF,oGAAoG,IAEpG;;;;IAIE,IAEF;;;;IAIE,IAEF,wEAAwE,IAExE,4EAA4E,IAE5E;;GAEC"}